<!DOCTYPE html>
<html>
<head>
	<title>Javascript AJAX Requests</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script language="JavaScript">

        var prof; //stores the user's search term
        var json; //stores the json data from user's request

        //makes a local request to /search/?term=query and returns the response contents
        function getResponse(query) {

            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", "/search/?term=" + query, false);
            xmlhttp.send();
            response = xmlhttp.responseText;
            return response;

        }

        //tracks textbox usage, called every time text box changes
		function getString(str) {
            prof = str; //for global storage of the user's input
            //search is pointless if the string's less than three characters...
            if(prof.length >= 5) {
                var inputResponse = getResponse(prof); //send user input as request to get contents back
                var w = window.open("", "MsgWindow", "width=500,height=500"); //open a window...
                w.document.write(inputResponse); //write the UVA People search contents to a window (temporary)
            }
		}

        $.getJSON("http://localhost:8000/search/?term=ishan", function(data) {
            console.log(data); // use data as a generic object
            var ppl_list = []
            for (var key in data){
                console.log(data[key]["address"])
            }
        });

	</script>
</head>
<body>
	Enter a string.
	<!--<input type="text" name="userInput" value="">
	<input type="button" name="submit" value="Click" onClick="processForm(this.form)">-->
	<input id="professor" value="" onchange="getString(this.value);"
onkeyup="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"/>

    <!-- Testing Javascript requests
      -- <input type="button" name="submit" value="Request" onClick="printResponse()">
      -->

</body>
</html>